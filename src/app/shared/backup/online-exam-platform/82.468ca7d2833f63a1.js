"use strict";(self.webpackChunkonlineExamPlatform=self.webpackChunkonlineExamPlatform||[]).push([[82],{9082:(ee,Q,u)=>{u.r(Q),u.d(Q,{ExamPageModule:()=>te});var p=u(6733),_=u(5850),T=u(3965),h=u(7382),x=u(393),E=u(9984),M=u(2826),f=u(5931),g=u(2340),N=u(1967),A=u(9550),m=u(3226),V=u(6125),K=u(1e3),b=u(1333),F=u(2325),R=u(4911),v=u(153),Z=u(8748),P=u(6188),O=u(1749),B=u(4893),Y=u(5333),t=u(755);let X=(()=>{class a{static#t=this.\u0275fac=function(n){return new(n||a)};static#e=this.\u0275cmp=t.Xpm({type:a,selectors:[["app-dialog"]],decls:9,vars:1,consts:[["mat-dialog-title",""],["align","end"],["mat-button","","mat-dialog-close",""],["mat-button","",3,"mat-dialog-close"]],template:function(n,i){1&n&&(t.TgZ(0,"h2",0),t._uU(1,"\u63d0\u4ea4\u8bd5\u5377\uff1f"),t.qZA(),t.TgZ(2,"mat-dialog-content"),t._uU(3,"\u63d0\u4ea4\u8bd5\u5377\u540e\u5c06\u4e0d\u80fd\u5728\u8fdb\u5165\u7b54\u9898\u754c\u9762\uff0c\u786e\u8ba4\u9000\u51fa\u5417\uff1f"),t.qZA(),t.TgZ(4,"mat-dialog-actions",1)(5,"button",2),t._uU(6,"\u53d6\u6d88"),t.qZA(),t.TgZ(7,"button",3),t._uU(8,"\u786e\u5b9a"),t.qZA()()),2&n&&(t.xp6(7),t.Q6J("mat-dialog-close",!0))},dependencies:[x.lW,g.ZT,g.uh,g.xY,g.H8]})}return a})();var C=u(4453);function tt(a,o){1&a&&(t.TgZ(0,"div")(1,"h2",1),t._uU(2,"\u63d0\u4ea4\u8bd5\u5377\u4e2d"),t.qZA(),t.TgZ(3,"mat-dialog-content"),t._UZ(4,"mat-progress-spinner",2),t.qZA()())}function et(a,o){1&a&&(t.TgZ(0,"div")(1,"mat-dialog-content"),t._uU(2," \u63d0\u4ea4\u8bd5\u5377\u6210\u529f\uff01 "),t.qZA(),t.TgZ(3,"mat-dialog-actions",3)(4,"button",4),t._uU(5,"\u786e\u5b9a"),t.qZA()()()),2&a&&(t.xp6(4),t.Q6J("mat-dialog-close",!0))}let S=(()=>{class a{constructor(e){this.examPaperService=e}get status(){return this.examPaperService.examStatus}static#t=this.\u0275fac=function(n){return new(n||a)(t.Y36(C.J))};static#e=this.\u0275cmp=t.Xpm({type:a,selectors:[["app-sumbit-dialog"]],decls:2,vars:2,consts:[[4,"ngIf"],["mat-dialog-title",""],["mode","indeterminate"],["align","end"],["mat-button","",3,"mat-dialog-close"]],template:function(n,i){1&n&&(t.YNc(0,tt,5,0,"div",0),t.YNc(1,et,6,1,"div",0)),2&n&&(t.Q6J("ngIf",!i.status),t.xp6(1),t.Q6J("ngIf",i.status))},dependencies:[p.O5,x.lW,g.ZT,g.uh,g.xY,g.H8,N.Ou]})}return a})();var L=u(5323),I=u(6121),j=u(2819),z=u(4818),$=u(4920);const H=function(a,o){return{selected:a,unselected:o}};function nt(a,o){if(1&a){const e=t.EpF();t.TgZ(0,"button",13),t.NdJ("click",function(i){const r=t.CHM(e).index,c=t.oxw(2),l=c.index,d=c.$implicit,J=t.oxw().index,w=t.oxw();return t.KtG(w.onChanged(w.currentIndex(J)+l,r,0,i,d.mark,d.answer))}),t._uU(1),t.qZA()}if(2&a){const e=o.$implicit,n=o.index,i=t.oxw(2).index,s=t.oxw().index,r=t.oxw();t.Q6J("ngClass",t.WLB(3,H,(r.selectedOption?r.selectedOption[r.currentIndex(s)+i].value:"?")==r.convert(n),(r.selectedOption?r.selectedOption[r.currentIndex(s)+i].value:"?")!=r.convert(n))),t.xp6(1),t.AsE(" ",r.convert(n),". ",e," ")}}function it(a,o){if(1&a&&(t.TgZ(0,"mat-card",7)(1,"mat-card-content"),t._UZ(2,"p"),t.TgZ(3,"div",8),t._uU(4),t.qZA(),t.TgZ(5,"div",9),t.ALo(6,"safeHtml"),t._uU(7),t.qZA(),t.TgZ(8,"div",10)(9,"p"),t._uU(10),t.qZA()()(),t.TgZ(11,"mat-card-actions",11),t.YNc(12,nt,2,6,"button",12),t.qZA()()),2&a){const e=t.oxw(),n=e.index,i=e.$implicit;t.xp6(4),t.hij(" ",n+1,". "),t.xp6(1),t.Q6J("innerHtml",t.lcZ(6,5,i.question),t.oJD),t.xp6(2),t.hij(" ",i.question," "),t.xp6(3),t.hij(" \u5206\u503c\uff1a",i.mark," \u5206 "),t.xp6(2),t.Q6J("ngForOf",i.selection)}}function at(a,o){if(1&a){const e=t.EpF();t.TgZ(0,"button",17),t.NdJ("click",function(i){const r=t.CHM(e).index,c=t.oxw(2),l=c.index,d=c.$implicit,J=t.oxw().index,w=t.oxw();return t.KtG(w.onChanged(w.currentIndex(J)+l,r,2,i,d.mark,d.answer))}),t._uU(1),t.qZA()}if(2&a){const e=o.$implicit,n=o.index,i=t.oxw(2).index,s=t.oxw().index,r=t.oxw();t.Q6J("ngClass",t.WLB(3,H,!!r.selectedOption&&r.calMultQ(n,r.selectedOption[r.currentIndex(s)+i].multValue),!r.selectedOption||r.calMultQ(n,r.selectedOption[r.currentIndex(s)+i].multValue))),t.xp6(1),t.AsE(" ",r.convert(n),". ",e," ")}}function ot(a,o){if(1&a&&(t.TgZ(0,"mat-card",7)(1,"mat-card-content")(2,"div",14)(3,"p",15),t._uU(4),t.qZA()(),t.TgZ(5,"div",10)(6,"p"),t._uU(7),t.qZA()()(),t.TgZ(8,"mat-card-actions",11),t.YNc(9,at,2,6,"button",16),t.qZA()()),2&a){const e=t.oxw(),n=e.index,i=e.$implicit;t.xp6(4),t.AsE(" ",n+1,". ",i.question," "),t.xp6(3),t.hij(" \u5206\u503c\uff1a",i.mark," \u5206 "),t.xp6(2),t.Q6J("ngForOf",i.selection)}}function rt(a,o){if(1&a){const e=t.EpF();t.TgZ(0,"mat-card",7)(1,"mat-card-content")(2,"div",8),t._uU(3),t._UZ(4,"div",9),t.ALo(5,"safeHtml"),t.qZA(),t.TgZ(6,"div",10)(7,"p"),t._uU(8),t.qZA()(),t.TgZ(9,"form",18)(10,"mdb-form-control")(11,"input",19),t.NdJ("change",function(i){t.CHM(e);const s=t.oxw().index,r=t.oxw().index,c=t.oxw();return t.KtG(c.onChanged(c.currentIndex(r)+s,-1,1,i,-1,""))}),t.qZA()()()()()}if(2&a){const e=t.oxw(),n=e.index,i=e.$implicit,s=t.oxw().index,r=t.oxw();t.xp6(3),t.hij(" ",n+1,". "),t.xp6(1),t.Q6J("innerHtml",t.lcZ(5,5,i.question),t.oJD),t.xp6(4),t.hij(" \u5206\u503c\uff1a",i.mark," \u5206 "),t.xp6(1),t.s9C("id","form"+r.currentIndex(s)+n),t.xp6(2),t.s9C("value",r.selectedOption?r.selectedOption[r.currentIndex(s)+n].value:"")}}function st(a,o){if(1&a&&(t.TgZ(0,"div")(1,"p"),t._uU(2),t.qZA()()),2&a){const e=o.$implicit,n=o.index;t.xp6(2),t.AsE("\uff08",n+1,"\uff09 ",e,"")}}function ct(a,o){if(1&a){const e=t.EpF();t.TgZ(0,"ckeditor",24),t.NdJ("ngModelChange",function(i){t.CHM(e);const s=t.oxw(2).index,r=t.oxw().index,c=t.oxw();return t.KtG(c.model[c.currentIndex(r)+s].editorData=i)})("ready",function(i){t.CHM(e);const s=t.oxw(2).index,r=t.oxw().index,c=t.oxw();return t.KtG(c.onReady(i,c.currentIndex(r)+s))})("change",function(i){t.CHM(e);const s=t.oxw(2).index,r=t.oxw().index,c=t.oxw();return t.KtG(c.onChange(i,c.currentIndex(r)+s))}),t.qZA()}if(2&a){const e=t.oxw(2).index,n=t.oxw().index,i=t.oxw();t.Q6J("ngModel",i.model[i.currentIndex(n)+e].editorData)("editor",i.Editor)}}function ut(a,o){if(1&a&&(t.TgZ(0,"mat-card",7)(1,"mat-card-content")(2,"div",8),t._uU(3),t.qZA(),t._UZ(4,"div",20),t.ALo(5,"safeHtml"),t.YNc(6,st,3,2,"div",21),t.TgZ(7,"div")(8,"p",22),t._uU(9),t.qZA()(),t.TgZ(10,"div"),t.YNc(11,ct,1,2,"ckeditor",23),t.qZA()()()),2&a){const e=t.oxw(),n=e.index,i=e.$implicit;t.xp6(3),t.hij(" ",n+1,". "),t.xp6(1),t.Q6J("innerHtml",t.lcZ(5,5,i.question),t.oJD),t.xp6(2),t.Q6J("ngForOf",i.selection),t.xp6(3),t.hij(" \u5206\u503c\uff1a",i.mark," \u5206 "),t.xp6(2),t.Q6J("ngIf",!i.type.includes("\u9898\u76ee"))}}function dt(a,o){if(1&a&&(t.TgZ(0,"div",5),t.YNc(1,it,13,7,"mat-card",6),t.YNc(2,ot,10,4,"mat-card",6),t.YNc(3,rt,12,7,"mat-card",6),t.YNc(4,ut,12,7,"mat-card",6),t.qZA()),2&a){const e=o.$implicit,n=o.index,i=t.oxw().index,s=t.oxw();t.s9C("id",s.currentIndex(i)+n),t.xp6(1),t.Q6J("ngIf","\u5355\u9879\u9009\u62e9\u9898"==e.type||"\u5224\u65ad\u9898"==e.type||e.type.includes("\u9605\u8bfb\u7406\u89e3")&&!e.type.includes("\u9898\u76ee")||"\u5b8c\u5f62\u586b\u7a7a"==e.type),t.xp6(1),t.Q6J("ngIf","\u591a\u9879\u9009\u62e9\u9898"==e.type),t.xp6(1),t.Q6J("ngIf","\u586b\u7a7a\u9898"==e.type),t.xp6(1),t.Q6J("ngIf","\u5355\u9879\u9009\u62e9\u9898"!=e.type&&"\u591a\u9879\u9009\u62e9\u9898"!=e.type&&"\u586b\u7a7a\u9898"!=e.type&&"\u5224\u65ad\u9898"!=e.type&&!(e.type.includes("\u9605\u8bfb\u7406\u89e3")&&!e.type.includes("\u9898\u76ee"))&&"\u5b8c\u5f62\u586b\u7a7a"!=e.type)}}function lt(a,o){if(1&a&&(t.TgZ(0,"div",1)(1,"mat-card",2)(2,"mat-card-content")(3,"p",3),t._uU(4),t.qZA()()(),t.YNc(5,dt,5,5,"div",4),t.qZA()),2&a){const e=o.$implicit,n=o.index,i=t.oxw();t.xp6(4),t.Oqu(e.desc),t.xp6(1),t.Q6J("ngForOf",i.getQuestions(n))}}let k=(()=>{class a{constructor(e,n){this.Activatedroute=e,this.examPaperService=n,this.exam_id=null,this.selectedPaper=null,this.questionPerPage=3,this.selectPage=1,this.notifier=new Z.x,this.model=[],this.selectedTrigger=new t.vpe,this.Editor=j,this.submitForm=new m.cw({})}ngOnInit(){this.submitForm=new m.cw({answer:new m.NI("")}),this.exam_id=this.Activatedroute.snapshot.paramMap.get("id"),this.retrieveData(this.exam_id),(0,P.F)(500).pipe((0,O.R)(this.notifier)).subscribe(()=>{this.paperId&&0!=this.model.length&&(this.retrieveUserData(localStorage.getItem("information"),this.paperId),this.notifier.next(),this.notifier.complete())})}onChange({},n){this.selectedOption&&(this.selectedOption[n].value=this.model[n].editorData,this.selectedTrigger.emit({data:this.selectedOption,index:n}))}onReady(e,n){this.selectedOption&&e.data.set(this.selectedOption[n].value),e.ui.view.editable.element.parentElement&&e.ui.view.editable.element.parentElement.insertBefore(e.ui.view.toolbar.element,e.ui.view.editable.element)}get section(){return this.data?this.data.section:[]}currentIndex(e){let n=0;if(this.data)for(let i=0;i<e;i++)n+=this.data.n[i];return n}getQuestions(e){if(this.data){let n=0,i=this.data.n[0];for(let s=0;s<e;s++)n+=this.data.n[s],i+=this.data.n[s+1];return this.data.questions.slice(n,i)}return[]}retrieveUserData(e,n){this.examPaperService.getUserAnswer(e,n).pipe((0,I.P)()).subscribe(i=>{if(i.answer){this.selectedOption=i.answer.answers;for(let s=0;s<this.selectedOption.length;s++)this.model[s].editorData=this.selectedOption[s].value;this.selectedTrigger.emit({data:this.selectedOption,index:-1})}})}retrieveData(e){null===e||this.examPaperService.getPaperEntry(e,"").pipe((0,I.P)()).subscribe(n=>{this.data=n.paper;for(let i=0;i<this.data.length;i++)this.model.push({editorData:""});this.paperId=n.paper_id})}onChanged(e,n,i,s,r,c){if(null==this.selectedOption&&this.data){this.selectedOption=new Array(this.data.length);for(let l=0;l<this.selectedOption.length;l++)this.selectedOption[l]={value:"",multValue:0,mark:-1}}switch(i){case 0:this.selectedOption&&this.selectedOption[e].value==this.convert(n)?this.selectedOption[e].value="":this.selectedOption&&(this.selectedOption[e].value=this.convert(n)),this.selectedOption&&c==this.selectedOption[e].value?this.selectedOption[e].mark=r:this.selectedOption&&(this.selectedOption[e].mark=0);break;case 1:this.selectedOption&&(this.selectedOption[e].value=s.target.value,this.selectedOption[e].mark=r);break;case 2:this.selectedOption&&!this.calMultQ(n,this.selectedOption[e].multValue)?(this.selectedOption[e].multValue+=Math.pow(10,n),this.selectedOption[e].value=this.convertMultQ(this.selectedOption[e].multValue)):this.selectedOption&&(this.selectedOption[e].multValue-=Math.pow(10,n),this.selectedOption[e].value=0==this.selectedOption[e].multValue?"":this.convertMultQ(this.selectedOption[e].multValue)),this.selectedOption&&c==this.selectedOption[e].value?this.selectedOption[e].mark=r:this.selectedOption&&(this.selectedOption[e].mark=0)}this.selectedOption&&this.selectedTrigger.emit({data:this.selectedOption,index:e})}convert(e){let n="";switch(e){case 0:n="A";break;case 1:n="B";break;case 2:n="C";break;case 3:n="D";break;case 4:n="E"}return n}calMultQ(e,n){return 0!=Math.floor(n%Math.pow(10,e+1)/Math.pow(10,e))}convertMultQ(e){let n="";for(let i=0;i<5;i++)if(0!=Math.floor(e%Math.pow(10,i+1)/Math.pow(10,i)))switch(i){case 0:n+="A";break;case 1:n+="B";break;case 2:n+="C";break;case 3:n+="D";break;case 4:n+="E"}return n}static#t=this.\u0275fac=function(n){return new(n||a)(t.Y36(_.gz),t.Y36(C.J))};static#e=this.\u0275cmp=t.Xpm({type:a,selectors:[["app-exam-paper"]],outputs:{selectedTrigger:"selectedTrigger"},decls:1,vars:1,consts:[["class","matCat",4,"ngFor","ngForOf"],[1,"matCat"],[1,"q_desc","mat-elevation-z5"],[1,"comment"],["class","matCat",3,"id",4,"ngFor","ngForOf"],[1,"matCat",3,"id"],["class","mat-elevation-z5",4,"ngIf"],[1,"mat-elevation-z5"],[1,"mat-card-text","form-inline","float-left"],[1,"mat-card-text",3,"innerHtml","appMath"],[1,"mark-box","float-right"],["align","start",1,"mat-card-a"],["class","answer-button","mat-stroked-button","",3,"ngClass","appMath","click",4,"ngFor","ngForOf"],["mat-stroked-button","",1,"answer-button",3,"ngClass","appMath","click"],[1,"form-inline","float-left",3,"appMath"],[1,"mat-card-text"],["class","answer-button","mat-stroked-button","",3,"ngClass","click",4,"ngFor","ngForOf"],["mat-stroked-button","",1,"answer-button",3,"ngClass","click"],[3,"id"],["mdbInput","","type","text",1,"form-control",3,"value","change"],[3,"innerHtml","appMath"],[4,"ngFor","ngForOf"],["align","end",1,"mark-box"],[3,"ngModel","editor","ngModelChange","ready","change",4,"ngIf"],[3,"ngModel","editor","ngModelChange","ready","change"]],template:function(n,i){1&n&&t.YNc(0,lt,6,2,"div",0),2&n&&t.Q6J("ngForOf",i.section)},dependencies:[p.mk,p.sg,p.O5,x.lW,f.a8,f.hq,f.dn,m._Y,m.JJ,m.JL,m.On,m.F,b.Af,b.VP,F.u,z.M,$.z],styles:[".mat-card-a[_ngcontent-%COMP%]{display:inline-table;overflow:auto;margin-bottom:10px;font-weight:700}[_nghost-%COMP%]     .ck-editor__editable_inline{min-height:200px}.answer-button[_ngcontent-%COMP%]{background:rgb(238,238,238);justify-content:left;margin:5px;width:95%;min-height:35px;height:-moz-fit-content;height:fit-content;text-align:justify;overflow:inherit}.selected[_ngcontent-%COMP%]{background:lightseagreen}.matCat[_ngcontent-%COMP%]{margin-bottom:10px}.mark-box[_ngcontent-%COMP%], .mat-card-text[_ngcontent-%COMP%]{font-weight:700}.form-box[_ngcontent-%COMP%]{display:flex;flex-direction:column}.form-box[_ngcontent-%COMP%]   .form-f[_ngcontent-%COMP%]{width:95%}.comment[_ngcontent-%COMP%]{font-weight:700}.q_desc[_ngcontent-%COMP%]{font-weight:700;margin-bottom:10px}"]})}return a})();function pt(a,o){1&a&&(t.TgZ(0,"mat-icon"),t._uU(1," menu "),t.qZA())}function mt(a,o){1&a&&(t.TgZ(0,"mat-icon"),t._uU(1," close "),t.qZA())}function _t(a,o){if(1&a&&(t.TgZ(0,"div",13),t._uU(1),t.qZA()),2&a){const e=t.oxw();t.xp6(1),t.Oqu(e.paper)}}function gt(a,o){if(1&a&&(t.TgZ(0,"div",14),t._uU(1),t.qZA()),2&a){const e=t.oxw();t.xp6(1),t.lnq("",e.rT.hour," : ",e.rT.min," : ",e.rT.sec,"")}}const xt=function(a,o){return{selected:a,unselected:o}};function ht(a,o){if(1&a){const e=t.EpF();t.TgZ(0,"button",18),t.NdJ("click",function(){const s=t.CHM(e).index,r=t.oxw().index,c=t.oxw();return t.KtG(c.WaringChanged(c.correctIndex(r)+s,c.ID))}),t._uU(1),t.qZA()}if(2&a){const e=o.index,n=t.oxw().index,i=t.oxw();t.Q6J("ngClass",t.WLB(2,xt,0!=(i.selectedList?i.selectedList[i.correctIndex(n)+e].value.length:0),0==(i.selectedList?i.selectedList[i.correctIndex(n)+e].value.length:0))),t.xp6(1),t.hij(" ",e+1," ")}}const ft=function(){return[]};function vt(a,o){if(1&a&&(t.TgZ(0,"div",15)(1,"div",16),t._uU(2),t.qZA(),t.YNc(3,ht,2,5,"button",17),t._UZ(4,"mat-divider"),t.qZA()),2&a){const e=o.$implicit,n=o.index,i=t.oxw();t.xp6(2),t.hij(" ",e.type," "),t.xp6(1),t.Q6J("ngForOf",t.DdM(2,ft).constructor(i.paperData.n[n]))}}let D=class U{constructor(o,e,n,i,s){this.observer=o,this.route=e,this.router=n,this.examPaperService=i,this.dialog=s,this.timeP={hour:0,min:0,sec:0},this.isAuto=!1,this.sumbitStauts=!1,this.submited=!1,this.notifier=new Z.x}get rT(){return this.timeP}get ID(){return this.exam_id}timer(){(0,P.F)(1e3).pipe((0,O.R)(this.notifier)).subscribe(e=>{if(this.timeReminder&&this.timeReminder>0)this.timeReminder=this.timeReminder-1,this.timeP.hour=Math.floor(this.timeReminder/3600),this.timeP.min=Math.floor(this.timeReminder%3600/60),this.timeP.sec=Math.floor(this.timeReminder%60);else if(this.timeReminder&&this.timeReminder<=0&&this.selectedList){if(this.exam_id&&this.paper_id){let n="",i=1;this.isAuto&&(n="Auto",i=2),this.examPaperService.submitPaper(localStorage.getItem("information"),this.exam_id,this.paper_id,this.selectedList,this.onCal,n,i),this.dialog.open(S).afterClosed().subscribe(r=>{this.submited=!0,this.router.navigateByUrl("/public/homePage")})}this.notifier.next(),this.notifier.complete()}})}SumbitExamPaper(o){this.dialog.open(X).afterClosed().subscribe(n=>{if(n&&this.selectedList&&this.exam_id&&this.paper_id){let i="",s=1;this.isAuto&&(i="Auto",s=2),this.examPaperService.submitPaper(localStorage.getItem("information"),this.exam_id,this.paper_id,this.selectedList,o,i,s),this.dialog.open(S).afterClosed().subscribe(c=>{this.submited=!0,this.router.navigateByUrl("/public/homePage")})}})}get paper(){return this.paperData?this.paperData.paper:""}get section(){return this.paperData?this.paperData.section:[]}get onCal(){let o=0;if(this.paperData&&this.selectedList){for(let e=0;e<this.selectedList.length;e++)o+=-1==this.selectedList[e].mark?0:this.selectedList[e].mark;return o}return o}ngOnInit(){this.exam_id=this.route.snapshot.paramMap.get("id"),this.retrieveData(this.exam_id,localStorage.getItem("information")),this.timer()}ngOnDestroy(){this.selectedList&&!this.submited&&this.exam_id&&this.paper_id&&this.examPaperService.submitPaper(localStorage.getItem("information"),this.exam_id,this.paper_id,this.selectedList,this.onCal,"",1),this.notifier.next(),this.notifier.complete()}correctIndex(o){let e=0;return this.paperData&&this.paperData.n.forEach((n,i)=>{i<o&&(e+=n)}),e}OnReceive(o){this.selectedList=o.data;let e=o.index,n=o.data.length;if(this.selectedList&&o.index>-1){let i=this.selectedList[e];this.exam_id&&this.paper_id&&this.examPaperService.autoSubmit(localStorage.getItem("information"),this.exam_id,this.paper_id,i,n,e)}}retrieveData(o,e){this.examPaperService.getPaperEntry(o,e).subscribe(n=>{this.paperData=n.paper,this.paper_id=n.paper_id,this.isAuto=n.isAuto;let i=new Date;this.timeReminder=Date.parse(new Date(n.std_start).toLocaleString())+72e5>Date.parse(new Date(n.end).toLocaleString())?(Date.parse(new Date(n.end).toLocaleString())-Date.parse(i.toLocaleString()))/1e3:(Date.parse(new Date(n.std_start).toLocaleString())+72e5-Date.parse(i.toLocaleString()))/1e3})}WaringChanged(o,e){window.location.assign("public/exam/"+e+"#"+o)}convert(o){let e="";switch(o){case 0:e="A";break;case 1:e="B";break;case 2:e="C";break;case 3:e="D";break;case 4:e="E"}return e}convertN(o){let e=0;switch(o){case"A":e=0;break;case"B":e=1;break;case"C":e=2;break;case"D":e=3;break;case"E":e=4}return e}ngAfterViewInit(){this.observer.observe(["(max-width: 800px)"]).pipe((0,B.g)(1),(0,v.t)(this)).subscribe(o=>{o.matches?(this.sidenav.mode="over",this.sidenav.close()):(this.sidenav.mode="side",this.sidenav.open())}),this.router.events.pipe((0,v.t)(this),(0,Y.h)(o=>o instanceof _.m2)).subscribe(()=>{"over"===this.sidenav.mode&&this.sidenav.close()})}static#t=this.\u0275fac=function(e){return new(e||U)(t.Y36(L.Yg),t.Y36(_.gz),t.Y36(_.F0),t.Y36(C.J),t.Y36(g.uw))};static#e=this.\u0275cmp=t.Xpm({type:U,selectors:[["app-exam-page"]],viewQuery:function(e,n){if(1&e&&t.Gf(h.JX,5),2&e){let i;t.iGM(i=t.CRH())&&(n.sidenav=i.first)}},hostBindings:function(e,n){1&e&&t.NdJ("beforeunload",function(){return n.timeReminder()},!1,t.Jf7)},decls:19,vars:5,consts:[[1,"mat-elevation-z2"],["mat-icon-button","",3,"click"],[4,"ngIf"],["mat-icon-button","",1,"perLevel",3,"click"],[1,"forward_icon"],["class","title",4,"ngIf"],["class","welcome",4,"ngIf"],[1,"mat-elevation-z8"],["sidenav","matSidenav"],["class","answer-card",4,"ngFor","ngForOf"],["mat-button","",1,"menu-button",3,"click"],[1,"content","mat-elevation-z5"],[3,"selectedTrigger"],[1,"title"],[1,"welcome"],[1,"answer-card"],[1,"answer-card-title"],["mat-mini-fab","","class","fab-button",3,"ngClass","click",4,"ngFor","ngForOf"],["mat-mini-fab","",1,"fab-button",3,"ngClass","click"]],template:function(e,n){if(1&e){const i=t.EpF();t.TgZ(0,"mat-toolbar",0)(1,"button",1),t.NdJ("click",function(){t.CHM(i);const r=t.MAs(11);return t.KtG(r.toggle())}),t.YNc(2,pt,2,0,"mat-icon",2),t.YNc(3,mt,2,0,"mat-icon",2),t.qZA(),t.TgZ(4,"button",3),t.NdJ("click",function(){return n.SumbitExamPaper(n.onCal)}),t.TgZ(5,"mat-icon",4),t._uU(6,"forward"),t.qZA()(),t.YNc(7,_t,2,1,"div",5),t.YNc(8,gt,2,3,"div",6),t.qZA(),t.TgZ(9,"mat-sidenav-container")(10,"mat-sidenav",7,8),t.YNc(12,vt,5,3,"div",9),t.TgZ(13,"div")(14,"button",10),t.NdJ("click",function(){return n.SumbitExamPaper(n.onCal)}),t._uU(15," \u63d0\u4ea4\u8bd5\u5377 "),t.qZA()()(),t.TgZ(16,"mat-sidenav-content")(17,"div",11)(18,"app-exam-paper",12),t.NdJ("selectedTrigger",function(r){return n.OnReceive(r)}),t.qZA()()()()}if(2&e){const i=t.MAs(11);t.xp6(2),t.Q6J("ngIf",!i.opened),t.xp6(1),t.Q6J("ngIf",i.opened),t.xp6(4),t.Q6J("ngIf",i.opened),t.xp6(1),t.Q6J("ngIf",n.timeReminder),t.xp6(4),t.Q6J("ngForOf",n.section)}},dependencies:[p.mk,p.sg,p.O5,x.lW,x.RK,x.nh,M.d,E.Hw,T.Ye,h.JX,h.TM,h.Rh,k],styles:["mat-toolbar[_ngcontent-%COMP%]{background:#004a9f;color:#fff;border-radius:10px;padding:10px}.perLevel[_ngcontent-%COMP%]{position:absolute;right:10px;width:50px;height:50}.title[_ngcontent-%COMP%]{margin-top:auto;margin-bottom:auto;font-weight:bolder;font-size:large}.welcome[_ngcontent-%COMP%]{margin:0 auto;font-weight:bolder;font-size:large}mat-sidenav[_ngcontent-%COMP%]{margin:16px;width:250px;border-right:none;background:lightblue;color:#fff;border-radius:10px;padding:16px;text-align:center}.content[_ngcontent-%COMP%]{height:calc(100vh - 98px);border-radius:10px;margin:16px;padding:10px;overflow:auto}mat-sidenav-container[_ngcontent-%COMP%]{height:calc(100vh - 65px)}.menu-button[_ngcontent-%COMP%]{width:100%;display:flex;align-items:center;justify-content:flex-start;font-size:1rem}.menu-button[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{margin-right:8px;color:#fff}.menu-button[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]{color:#fff}.fab-button[_ngcontent-%COMP%]{color:#000;width:29px;height:29px;margin:2px 2px 5px;display:inline-table;overflow:auto}.unselected[_ngcontent-%COMP%]{background:white}.selected[_ngcontent-%COMP%]{background:lightseagreen}.warning[_ngcontent-%COMP%]{background:yellow}.answer-card[_ngcontent-%COMP%]{text-align:start;overflow:hidden}.avatar[_ngcontent-%COMP%]{margin-top:16px;width:100px;height:100px;border-radius:50%}.name[_ngcontent-%COMP%]{margin-top:8px;font-weight:700}.designation[_ngcontent-%COMP%]{margin-top:2px;font-size:1rem;color:#d3d3d3}mat-divider[_ngcontent-%COMP%]{margin-top:16px;margin-bottom:16px;background-color:#4f5355}.answer-card-title[_ngcontent-%COMP%]{text-align:center;color:#1f48cc;font-weight:bolder;margin-bottom:10px}.forward_icon[_ngcontent-%COMP%]{font-size:2rem}"]})};function bt(a,o){if(1&a&&(t.TgZ(0,"p"),t._UZ(1,"img",13),t._uU(2),t.qZA()),2&a){const e=t.oxw(2),n=e.index,i=e.$implicit,s=t.oxw().index,r=t.oxw();t.xp6(2),t.AsE(" ",r.mark[r.currentIndex(s)+n]," \u5206 / ",i.mark," \u5206")}}function Ct(a,o){if(1&a&&(t.TgZ(0,"p"),t._UZ(1,"img",14),t._uU(2),t.qZA()),2&a){const e=t.oxw(2),n=e.index,i=e.$implicit,s=t.oxw().index,r=t.oxw();t.xp6(2),t.AsE(" ",r.mark[r.currentIndex(s)+n]," \u5206 / ",i.mark," \u5206")}}D=(0,R.gn)([(0,v.c)()],D);const wt=function(a,o){return{"box-right":a,"box-wrong":o}};function At(a,o){if(1&a&&(t.TgZ(0,"mat-card-content",12),t.YNc(1,bt,3,2,"p",10),t.YNc(2,Ct,3,2,"p",10),t.qZA()),2&a){const e=t.oxw().index,n=t.oxw().index,i=t.oxw();t.Q6J("ngClass",t.WLB(3,wt,0!=i.mark[i.currentIndex(n)+e],0==i.mark[i.currentIndex(n)+e])),t.xp6(1),t.Q6J("ngIf",0!=i.mark[i.currentIndex(n)+e]),t.xp6(1),t.Q6J("ngIf",0==i.mark[i.currentIndex(n)+e])}}function Zt(a,o){if(1&a&&(t.TgZ(0,"div",15)(1,"p",16),t._uU(2),t.qZA()()),2&a){const e=t.oxw(),n=e.index,i=e.$implicit;t.xp6(2),t.AsE("",n+1,". ",i.question," ")}}function Pt(a,o){if(1&a&&(t.TgZ(0,"p",20),t._UZ(1,"img",13),t._uU(2),t.qZA()),2&a){const e=t.oxw(2).$implicit;t.xp6(2),t.hij(" \u89e3\u6790\uff1a",""==e.comment?e.answer:e.comment,"")}}function Ot(a,o){if(1&a&&(t.TgZ(0,"p",20),t._UZ(1,"img",14),t._uU(2),t.qZA()),2&a){const e=t.oxw(2).$implicit;t.xp6(2),t.hij(" \u89e3\u6790\uff1a",""==e.comment?e.answer:e.comment," ")}}function Tt(a,o){if(1&a&&(t.TgZ(0,"div")(1,"p",16),t._uU(2),t.qZA(),t.TgZ(3,"form",17)(4,"mdb-form-control"),t._UZ(5,"input",18),t.qZA()(),t.TgZ(6,"mat-card")(7,"mat-card-content"),t.YNc(8,Pt,3,1,"p",19),t.YNc(9,Ot,3,1,"p",19),t.qZA()()()),2&a){const e=t.oxw(),n=e.index,i=e.$implicit,s=t.oxw().index,r=t.oxw();t.xp6(2),t.AsE(" ",n+1,". ",i.question," "),t.xp6(1),t.s9C("id","form"+r.currentIndex(s)+n),t.xp6(2),t.s9C("value",r.selected?r.selected[n].value:""),t.xp6(3),t.Q6J("ngIf",0!=r.mark[n]),t.xp6(1),t.Q6J("ngIf",0==r.mark[n])}}function Et(a,o){if(1&a&&(t.TgZ(0,"div")(1,"p"),t._uU(2),t.qZA()()),2&a){const e=o.$implicit,n=o.index;t.xp6(2),t.AsE("\uff08",n+1,"\uff09 ",e,"")}}function Mt(a,o){if(1&a){const e=t.EpF();t.TgZ(0,"ckeditor",26),t.NdJ("ready",function(i){t.CHM(e);const s=t.oxw(4);return t.KtG(s.onReady(i))}),t.qZA()}if(2&a){const e=t.oxw(2).index,n=t.oxw().index,i=t.oxw();t.s9C("data",i.selected?i.selected[i.currentIndex(n)+e].value:""),t.Q6J("editor",i.Editor)("disabled",!0)}}function Ft(a,o){if(1&a&&(t.TgZ(0,"p",20),t._UZ(1,"img",13),t._uU(2),t.qZA()),2&a){const e=t.oxw(2).$implicit;t.xp6(2),t.hij(" \u89e3\u6790\uff1a",""==e.comment?e.answer:e.comment,"")}}function It(a,o){if(1&a&&(t.TgZ(0,"p",20),t._UZ(1,"img",14),t._uU(2),t.qZA()),2&a){const e=t.oxw(2).$implicit;t.xp6(2),t.hij(" \u89e3\u6790\uff1a",""==e.comment?e.answer:e.comment," ")}}function kt(a,o){if(1&a&&(t.TgZ(0,"div"),t._UZ(1,"p"),t.TgZ(2,"div",21),t._uU(3),t._UZ(4,"div",22),t.ALo(5,"safeHtml"),t.qZA(),t.YNc(6,Et,3,2,"div",23),t.TgZ(7,"div")(8,"p",24),t._uU(9),t.qZA()(),t.TgZ(10,"div"),t.YNc(11,Mt,1,3,"ckeditor",25),t.qZA(),t.TgZ(12,"mat-card")(13,"mat-card-content"),t.YNc(14,Ft,3,1,"p",19),t.YNc(15,It,3,1,"p",19),t.qZA()()()),2&a){const e=t.oxw(),n=e.index,i=e.$implicit,s=t.oxw().index,r=t.oxw();t.xp6(3),t.hij("",n+1,". "),t.xp6(1),t.Q6J("innerHtml",t.lcZ(5,7,i.question),t.oJD),t.xp6(2),t.Q6J("ngForOf",i.selection),t.xp6(3),t.hij(" \u5206\u503c\uff1a",i.mark," \u5206 "),t.xp6(2),t.Q6J("ngIf",!i.type.includes("\u9898\u76ee")),t.xp6(3),t.Q6J("ngIf",0!=r.mark[r.currentIndex(s)+n]),t.xp6(1),t.Q6J("ngIf",0==r.mark[r.currentIndex(s)+n])}}const W=function(a,o,e){return{correct:a,incorrect:o,normal:e}};function Dt(a,o){if(1&a&&(t.TgZ(0,"mat-expansion-panel",32)(1,"mat-expansion-panel-header")(2,"mat-panel-title",16),t._uU(3),t.qZA()()()),2&a){const e=t.oxw(),n=e.index,i=e.$implicit,s=t.oxw(2).index,r=t.oxw().index,c=t.oxw();t.Q6J("expanded",!0)("ngClass",t.kEZ(4,W,c.getAnswer(c.currentIndex(r)+s)==n,c.convertN(c.selected?c.selected[c.currentIndex(r)+s].value:"")!=c.getAnswer(c.currentIndex(r)+s)&&c.convertN(c.selected?c.selected[c.currentIndex(r)+s].value:"")==n,c.convertN(c.selected?c.selected[c.currentIndex(r)+s].value:"")!=c.getAnswer(c.currentIndex(r)+s)&&c.convertN(c.selected?c.selected[c.currentIndex(r)+s].value:"")!=n&&c.getAnswer(c.currentIndex(r)+s)!=n)),t.xp6(3),t.AsE(" ",c.convert(n),". ",i," ")}}function yt(a,o){if(1&a&&(t.TgZ(0,"mat-expansion-panel",33)(1,"mat-expansion-panel-header")(2,"mat-panel-title",16),t._uU(3),t.qZA()(),t.TgZ(4,"div",3)(5,"p",34),t._uU(6),t.qZA()()()),2&a){const e=t.oxw(),n=e.index,i=e.$implicit,s=t.oxw(2),r=s.index,c=s.$implicit,l=t.oxw().index,d=t.oxw();t.Q6J("expanded",!0)("ngClass",t.kEZ(5,W,d.getAnswer(d.currentIndex(l)+r)==n,d.convertN(d.selected?d.selected[d.currentIndex(l)+r].value:"")!=d.getAnswer(d.currentIndex(l)+r)&&d.convertN(d.selected?d.selected[d.currentIndex(l)+r].value:"")==n,d.convertN(d.selected?d.selected[d.currentIndex(l)+r].value:"")!=d.getAnswer(d.currentIndex(l)+r)&&d.convertN(d.selected?d.selected[d.currentIndex(l)+r].value:"")!=n&&d.getAnswer(d.currentIndex(l)+r)!=n)),t.xp6(3),t.AsE(" ",d.convert(n),". ",i," "),t.xp6(3),t.hij("\u89e3\u6790\uff1a",""==c.comment?c.answer:c.comment,"")}}function Jt(a,o){if(1&a&&(t.TgZ(0,"div",29),t.YNc(1,Dt,4,8,"mat-expansion-panel",30),t.YNc(2,yt,7,9,"mat-expansion-panel",31),t.qZA()),2&a){const e=o.index,n=t.oxw(2).index,i=t.oxw().index,s=t.oxw();t.xp6(1),t.Q6J("ngIf",s.getAnswer(s.currentIndex(i)+n)!=e),t.xp6(1),t.Q6J("ngIf",s.getAnswer(s.currentIndex(i)+n)==e)}}function Ut(a,o){if(1&a&&(t.TgZ(0,"mat-card-actions",27),t.YNc(1,Jt,3,2,"div",28),t.qZA()),2&a){const e=t.oxw().$implicit;t.xp6(1),t.Q6J("ngForOf",e.selection)}}const qt=function(a,o){return{correct:a,incorrect:o}};function Qt(a,o){if(1&a&&(t.TgZ(0,"button",36),t._uU(1),t.qZA()),2&a){const e=o.$implicit,n=o.index,i=t.oxw(2).index,s=t.oxw().index,r=t.oxw();t.Q6J("ngClass",t.WLB(3,qt,!!r.selected&&r.calMultQ(n,r.selected[r.currentIndex(s)+i].multValue)&&0!=r.mark[r.currentIndex(s)+i],(!r.selected||r.calMultQ(n,r.selected[r.currentIndex(s)+i].multValue))&&0==r.mark[r.currentIndex(s)+i])),t.xp6(1),t.AsE(" ",r.convert(n),". ",e,"")}}function Nt(a,o){if(1&a&&(t.TgZ(0,"p",20),t._UZ(1,"img",13),t._uU(2),t.qZA()),2&a){const e=t.oxw(2).$implicit;t.xp6(2),t.AsE(" \u6b63\u786e\u7b54\u6848\uff1a",e.answer," \u3010\u89e3\u6790\u3011\uff1a",""==e.comment?e.answer:e.comment," ")}}function Rt(a,o){if(1&a&&(t.TgZ(0,"p",20),t._UZ(1,"img",14),t._uU(2),t.qZA()),2&a){const e=t.oxw(2).$implicit;t.xp6(2),t.AsE(" \u6b63\u786e\u7b54\u6848\uff1a",e.answer," \u3010\u89e3\u6790\u3011\uff1a",""==e.comment?e.answer:e.comment," ")}}function Bt(a,o){if(1&a&&(t.TgZ(0,"mat-card-actions",27),t.YNc(1,Qt,2,6,"button",35),t.TgZ(2,"mat-card")(3,"mat-card-content"),t.YNc(4,Nt,3,2,"p",19),t.YNc(5,Rt,3,2,"p",19),t.qZA()()()),2&a){const e=t.oxw(),n=e.$implicit,i=e.index,s=t.oxw().index,r=t.oxw();t.xp6(1),t.Q6J("ngForOf",n.selection),t.xp6(3),t.Q6J("ngIf",0!=r.mark[r.currentIndex(s)+i]),t.xp6(1),t.Q6J("ngIf",0==r.mark[r.currentIndex(s)+i])}}function Yt(a,o){if(1&a&&(t.TgZ(0,"div",5)(1,"mat-card",6)(2,"mat-card-content")(3,"div",7)(4,"mat-card"),t.YNc(5,At,3,6,"mat-card-content",8),t.qZA()(),t.YNc(6,Zt,3,2,"div",9),t.YNc(7,Tt,10,6,"div",10),t.YNc(8,kt,16,9,"div",10),t.qZA(),t.YNc(9,Ut,2,1,"mat-card-actions",11),t.YNc(10,Bt,6,3,"mat-card-actions",11),t.qZA()()),2&a){const e=o.$implicit,n=o.index,i=t.oxw().index,s=t.oxw();t.s9C("id",s.currentIndex(i)+n),t.xp6(5),t.Q6J("ngIf",!e.type.includes("\u9898\u76ee")),t.xp6(1),t.Q6J("ngIf","\u5355\u9879\u9009\u62e9\u9898"==e.type||"\u5224\u65ad\u9898"==e.type||e.type.includes("\u9605\u8bfb\u7406\u89e3")&&!e.type.includes("\u9898\u76ee")||"\u5b8c\u5f62\u586b\u7a7a"==e.type),t.xp6(1),t.Q6J("ngIf","\u586b\u7a7a\u9898"==e.type),t.xp6(1),t.Q6J("ngIf","\u5355\u9879\u9009\u62e9\u9898"!=e.type&&"\u591a\u9879\u9009\u62e9\u9898"!=e.type&&"\u586b\u7a7a\u9898"!=e.type&&"\u5224\u65ad\u9898"!=e.type&&!(e.type.includes("\u9605\u8bfb\u7406\u89e3")&&!e.type.includes("\u9898\u76ee"))&&"\u5b8c\u5f62\u586b\u7a7a"!=e.type&&"\u586b\u7a7a\u9898"!=e.type),t.xp6(1),t.Q6J("ngIf","\u5355\u9879\u9009\u62e9\u9898"==e.type||"\u5224\u65ad\u9898"==e.type||e.type.includes("\u9605\u8bfb\u7406\u89e3")&&!e.type.includes("\u9898\u76ee")||"\u5b8c\u5f62\u586b\u7a7a"==e.type),t.xp6(1),t.Q6J("ngIf","\u591a\u9879\u9009\u62e9\u9898"==e.type)}}function St(a,o){if(1&a&&(t.TgZ(0,"div",1)(1,"mat-card",2)(2,"mat-card-content")(3,"p",3),t._uU(4),t.qZA()()(),t.YNc(5,Yt,11,7,"div",4),t.qZA()),2&a){const e=o.$implicit,n=o.index,i=t.oxw();t.xp6(4),t.Oqu(e.desc),t.xp6(1),t.Q6J("ngForOf",i.getQuestions(n))}}let Lt=(()=>{class a{constructor(e,n){this.Activatedroute=e,this.examPaperService=n,this.selectedPaper=null,this.questionPerPage=3,this.selectPage=1,this.selectedOption=[],this.notifier=new Z.x,this.Editor=j,this.eventTrigger=new t.vpe}onReady(e){e.ui.view.editable.element.parentElement&&e.ui.view.editable.element.parentElement.insertBefore(e.ui.view.toolbar.element,e.ui.view.editable.element)}ngOnInit(){this.exam_id=this.Activatedroute.snapshot.paramMap.get("id"),this.retrieveData(this.exam_id),(0,P.F)(500).pipe((0,O.R)(this.notifier)).subscribe(()=>{this.paper_id&&(this.retrieveResult(localStorage.getItem("information"),this.paper_id),this.notifier.next(),this.notifier.complete())})}get section(){return this.paperData?this.paperData.section:[]}get mark(){if(!this.paperData)return[0];let e=[];for(let n=0;n<this.selectedOption.length;n++)e.push(this.selectedOption[n].mark);return e}get selected(){if(this.paperData&&0!=this.selectedOption.length)return this.selectedOption}getAnswer(e){return this.paperData?this.convertN(this.paperData.questions[e].answer):0}calMultQ(e,n){return 0!=Math.floor(n%Math.pow(10,e+1)/Math.pow(10,e))}getMultAnswer(e,n){return!1}getQuestions(e){if(this.paperData){let n=0,i=this.paperData.n[0];for(let s=0;s<e;s++)n+=this.paperData.n[s],i+=this.paperData.n[s+1];return this.paperData.questions.slice(n,i)}return[]}currentIndex(e){let n=0;if(this.paperData)for(let i=0;i<e;i++)n+=this.paperData.n[i];return n}retrieveResult(e,n){this.examPaperService.getUserAnswer(e,n).pipe((0,I.P)()).subscribe(i=>{this.selectedOption=i.answer.answers,this.eventTrigger.emit(this.selectedOption)})}retrieveData(e){this.examPaperService.getPaperEntry(e,"").subscribe(n=>{this.paperData=n.paper,this.paper_id=n.paper_id})}convertN(e){let n=0;switch(e){case"A":n=0;break;case"B":n=1;break;case"C":n=2;break;case"D":n=3;break;case"E":n=4}return n}convert(e){let n="";switch(e){case 0:n="A";break;case 1:n="B";break;case 2:n="C";break;case 3:n="D";break;case 4:n="E"}return n}static#t=this.\u0275fac=function(n){return new(n||a)(t.Y36(_.gz),t.Y36(C.J))};static#e=this.\u0275cmp=t.Xpm({type:a,selectors:[["app-result-page"]],outputs:{eventTrigger:"eventTrigger"},decls:1,vars:1,consts:[["class","matCat",4,"ngFor","ngForOf"],[1,"matCat"],[1,"q_desc","mat-elevation-z5"],[1,"comment"],["class","matCat",3,"id",4,"ngFor","ngForOf"],[1,"matCat",3,"id"],[1,"mat-elevation-z5"],[1,"mark-box"],[3,"ngClass",4,"ngIf"],["class","container",3,"appMath",4,"ngIf"],[4,"ngIf"],["class","mat-card-a","align","start",4,"ngIf"],[3,"ngClass"],["src","../../../../../../assets/icons8-correct.svg"],["src","../../../../../../assets/icons8-wrong.svg"],[1,"container",3,"appMath"],[3,"appMath"],[3,"id"],["mdbInput","","type","text","disabled","",1,"form-control",3,"value"],["class","comment",3,"appMath",4,"ngIf"],[1,"comment",3,"appMath"],[1,"form-inline","comment"],[3,"innerHtml","appMath"],[4,"ngFor","ngForOf"],["align","end",1,"mark-box"],[3,"editor","data","disabled","ready",4,"ngIf"],[3,"editor","data","disabled","ready"],["align","start",1,"mat-card-a"],["class","answer-button",4,"ngFor","ngForOf"],[1,"answer-button"],["disabled","",3,"expanded","ngClass",4,"ngIf"],["hideToggle","",3,"expanded","ngClass",4,"ngIf"],["disabled","",3,"expanded","ngClass"],["hideToggle","",3,"expanded","ngClass"],["align","start",3,"appMath"],["class","answer-button1","mat-stroked-button","","disabled","",3,"ngClass","appMath",4,"ngFor","ngForOf"],["mat-stroked-button","","disabled","",1,"answer-button1",3,"ngClass","appMath"]],template:function(n,i){1&n&&t.YNc(0,St,6,2,"div",0),2&n&&t.Q6J("ngForOf",i.section)},dependencies:[p.mk,p.sg,p.O5,x.lW,f.a8,f.hq,f.dn,A.ib,A.yz,A.yK,m._Y,m.JL,m.F,b.Af,b.VP,F.u,z.M,$.z],styles:[".mat-card-a[_ngcontent-%COMP%]{display:inline-table;overflow:auto;margin-bottom:10px}[_nghost-%COMP%]     .ck-editor__editable_inline{min-height:200px}.answer-button1[_ngcontent-%COMP%]{justify-content:left;margin:5px;width:95%;min-height:35px;height:-moz-fit-content;height:fit-content;text-align:justify;overflow:inherit}.answer-button[_ngcontent-%COMP%]{justify-content:left;margin:5px;width:95%;min-height:35px;height:-moz-fit-content;height:fit-content;text-align:justify;overflow:auto}.correct[_ngcontent-%COMP%]{background:lightseagreen}.incorrect[_ngcontent-%COMP%]{background:lightcoral}.normal[_ngcontent-%COMP%]{background:rgb(238,238,238)}.matCat[_ngcontent-%COMP%]{margin-bottom:10px}.container[_ngcontent-%COMP%]{align-items:start;font-weight:700;height:auto;margin-top:15px;margin-left:5px}.box-right[_ngcontent-%COMP%]{background-color:#ceebd7}.box-wrong[_ngcontent-%COMP%]{background-color:#ebaba5}.comment[_ngcontent-%COMP%]{font-weight:700}.q_desc[_ngcontent-%COMP%]{font-weight:700;margin-bottom:10px}"]})}return a})();function jt(a,o){1&a&&(t.TgZ(0,"mat-icon"),t._uU(1," menu "),t.qZA())}function zt(a,o){1&a&&(t.TgZ(0,"mat-icon"),t._uU(1," close "),t.qZA())}const $t=function(a,o){return{correct:a,incorrect:o}};function Ht(a,o){if(1&a){const e=t.EpF();t.TgZ(0,"button",16),t.NdJ("click",function(){const s=t.CHM(e).index,r=t.oxw().index,c=t.oxw();return t.KtG(c.WaringChanged(c.correctIndex(r)+s,c.ID))}),t._uU(1),t.qZA()}if(2&a){const e=o.index,n=t.oxw().index,i=t.oxw();t.Q6J("ngClass",t.WLB(2,$t,i.table[i.correctIndex(n)+e],!i.table[i.correctIndex(n)+e])),t.xp6(1),t.hij(" ",e+1," ")}}const Wt=function(){return[]};function Gt(a,o){if(1&a&&(t.TgZ(0,"div",13)(1,"div",14),t._uU(2),t.qZA(),t.YNc(3,Ht,2,5,"button",15),t._UZ(4,"mat-divider"),t.qZA()),2&a){const e=o.$implicit,n=o.index,i=t.oxw();t.xp6(2),t.hij(" ",e.type," "),t.xp6(1),t.Q6J("ngForOf",t.DdM(2,Wt).constructor(i.paperData?i.paperData.n[n]:0))}}let y=class q{constructor(o,e,n,i,s){this.observer=o,this.route=e,this.router=n,this.examPaperService=i,this.dialog=s,this.selectedList=[],this.questionStautList=[],this.sumbitStauts=!1,this.notifier=new Z.x}get userName(){return localStorage.getItem("username")}ngOnInit(){this.exam_id=this.route.snapshot.paramMap.get("id"),this.retrieveData(this.exam_id),(0,P.F)(500).pipe((0,O.R)(this.notifier)).subscribe(()=>{this.paper_id&&(this.retrieveUser(localStorage.getItem("information"),this.paper_id),this.notifier.next(),this.notifier.complete())})}get paper(){return this.paperData?this.paperData.paper:""}get section(){return this.paperData?this.paperData.section:[]}get ID(){return this.exam_id}get wANDc(){let o=[0,0];if(this.resultInfo&&this.paperData)for(let e=0;e<this.resultInfo.answers.length;e++)this.resultInfo.answers[e].value==this.paperData.questions[e].answer?o[0]+=1:o[1]+=1;return o}get mark(){return this.resultInfo?this.resultInfo.mark:0}get table(){let o=this.selectedList.length;if(this.paperData)for(let e=0;e<o;e++)this.selectedList[e].value==this.paperData.questions[e].answer&&(this.questionStautList[e]=!0);return this.questionStautList}correctIndex(o){let e=0;return this.paperData&&this.paperData.n.forEach((n,i)=>{i<o&&(e+=n)}),e}OnReceive(o){this.selectedList=o,this.questionStautList=new Array(this.selectedList.length).fill(!1)}retrieveUser(o,e){this.examPaperService.getUserAnswer(o,e).subscribe(n=>{this.resultInfo=n.answer})}retrieveData(o){this.examPaperService.getPaperEntry(o,"").subscribe(e=>{this.paperData=e.paper,this.paper_id=e.paper_id})}WaringChanged(o,e){window.location.assign("/public/exam/result/"+e+"#"+o)}ngAfterViewInit(){this.observer.observe(["(max-width: 800px)"]).pipe((0,B.g)(1),(0,v.t)(this)).subscribe(o=>{o.matches?(this.sidenav.mode="over",this.sidenav.close()):(this.sidenav.mode="side",this.sidenav.open())}),this.router.events.pipe((0,v.t)(this),(0,Y.h)(o=>o instanceof _.m2)).subscribe(()=>{"over"===this.sidenav.mode&&this.sidenav.close()})}convertN(o){let e=0;switch(o){case"A":e=0;break;case"B":e=1;break;case"C":e=2;break;case"D":e=3;break;case"E":e=4}return e}static#t=this.\u0275fac=function(e){return new(e||q)(t.Y36(L.Yg),t.Y36(_.gz),t.Y36(_.F0),t.Y36(C.J),t.Y36(g.uw))};static#e=this.\u0275cmp=t.Xpm({type:q,selectors:[["app-exam-result"]],viewQuery:function(e,n){if(1&e&&t.Gf(h.JX,5),2&e){let i;t.iGM(i=t.CRH())&&(n.sidenav=i.first)}},decls:30,vars:8,consts:[[1,"mat-elevation-z2"],["mat-icon-button","",3,"click"],[4,"ngIf"],["mat-icon-button","","routerLink","/public/homePage",1,"perLevel"],[1,"title"],[1,"mat-elevation-z8"],["sidenav","matSidenav"],[1,"result-card"],["src","../../../../../assets/icons8-correct.svg"],["src","../../../../../assets/icons8-wrong.svg"],["class","answer-card",4,"ngFor","ngForOf"],[1,"content","mat-elevation-z5"],[3,"eventTrigger"],[1,"answer-card"],[1,"answer-card-title"],["mat-mini-fab","","class","fab-button",3,"ngClass","click",4,"ngFor","ngForOf"],["mat-mini-fab","",1,"fab-button",3,"ngClass","click"]],template:function(e,n){if(1&e){const i=t.EpF();t.TgZ(0,"mat-toolbar",0)(1,"button",1),t.NdJ("click",function(){t.CHM(i);const r=t.MAs(11);return t.KtG(r.toggle())}),t.YNc(2,jt,2,0,"mat-icon",2),t.YNc(3,zt,2,0,"mat-icon",2),t.qZA(),t.TgZ(4,"button",3)(5,"mat-icon"),t._uU(6,"forward"),t.qZA()(),t.TgZ(7,"p",4),t._uU(8),t.qZA()(),t.TgZ(9,"mat-sidenav-container")(10,"mat-sidenav",5,6)(12,"div")(13,"mat-card",7)(14,"mat-card-content")(15,"p"),t._uU(16),t.qZA(),t.TgZ(17,"p"),t._UZ(18,"img",8),t._uU(19),t.qZA(),t.TgZ(20,"p"),t._UZ(21,"img",9),t._uU(22),t.qZA(),t.TgZ(23,"p"),t._uU(24),t.qZA()()()(),t._UZ(25,"mat-divider"),t.YNc(26,Gt,5,3,"div",10),t.qZA(),t.TgZ(27,"mat-sidenav-content")(28,"div",11)(29,"app-result-page",12),t.NdJ("eventTrigger",function(r){return n.OnReceive(r)}),t.qZA()()()()}if(2&e){const i=t.MAs(11);t.xp6(2),t.Q6J("ngIf",!i.opened),t.xp6(1),t.Q6J("ngIf",i.opened),t.xp6(5),t.Oqu(n.paper),t.xp6(8),t.hij("\u59d3\u540d\uff1a",n.userName,""),t.xp6(3),t.hij("\u6b63\u786e\u9898\u6570\uff1a",n.wANDc[0],""),t.xp6(3),t.hij("\u9519\u8bef\u9898\u6570\uff1a",n.wANDc[1],""),t.xp6(2),t.hij("\u603b\u5206\uff1a",n.mark," \u5206"),t.xp6(2),t.Q6J("ngForOf",n.section)}},dependencies:[p.mk,p.sg,p.O5,_.rH,x.RK,x.nh,M.d,E.Hw,T.Ye,h.JX,h.TM,h.Rh,f.a8,f.dn,Lt],styles:["mat-toolbar[_ngcontent-%COMP%]{background:#004a9f;color:#fff;border-radius:10px;padding:10px}.perLevel[_ngcontent-%COMP%]{position:absolute;right:0}.title[_ngcontent-%COMP%]{margin-top:auto;margin-bottom:auto;font-weight:bolder;font-size:large}.welcome[_ngcontent-%COMP%]{margin:0 auto;font-weight:bolder;font-size:large}mat-sidenav[_ngcontent-%COMP%]{margin:16px;width:300px;border-right:none;background:lightblue;border-radius:10px;padding:16px;text-align:center}.content[_ngcontent-%COMP%]{height:calc(100vh - 98px);border-radius:10px;margin:16px;padding:10px;overflow:auto}mat-sidenav-container[_ngcontent-%COMP%]{height:calc(100vh - 65px)}.menu-button[_ngcontent-%COMP%]{width:100%;display:flex;align-items:center;justify-content:flex-start;font-size:1rem}.menu-button[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{margin-right:8px;color:#fff}.menu-button[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]{color:#fff}.fab-button[_ngcontent-%COMP%]{color:#000;width:29px;height:29px;margin:2px 2px 5px;display:inline-table;overflow:auto}.incorrect[_ngcontent-%COMP%]{background:lightcoral}.correct[_ngcontent-%COMP%]{background:lightseagreen}.warning[_ngcontent-%COMP%]{background:yellow}.answer-card[_ngcontent-%COMP%]{text-align:start;overflow:hidden}.avatar[_ngcontent-%COMP%]{margin-top:16px;width:100px;height:100px;border-radius:50%}.name[_ngcontent-%COMP%]{margin-top:8px;font-weight:700}.designation[_ngcontent-%COMP%]{margin-top:2px;font-size:1rem;color:#d3d3d3}mat-divider[_ngcontent-%COMP%]{margin-top:16px;margin-bottom:16px;background-color:#4f5355}.answer-card-title[_ngcontent-%COMP%]{text-align:center;color:#1f48cc;font-weight:bolder;margin-bottom:10px}.result-card[_ngcontent-%COMP%]{background:lightcyan;color:#000}"]})};y=(0,R.gn)([(0,v.c)()],y);var G=u(844);const Vt=[{path:":id",component:D,children:[{path:"",component:k}],canActivate:[G.n]},{path:"result/:id",component:y,children:[{path:"",component:k}],canActivate:[G.n]}];let Kt=(()=>{class a{static#t=this.\u0275fac=function(n){return new(n||a)};static#e=this.\u0275mod=t.oAB({type:a});static#n=this.\u0275inj=t.cJS({imports:[_.Bz.forChild(Vt),_.Bz]})}return a})();var Xt=u(1815);let te=(()=>{class a{static#t=this.\u0275fac=function(n){return new(n||a)};static#e=this.\u0275mod=t.oAB({type:a});static#n=this.\u0275inj=t.cJS({imports:[p.ez,_.Bz,x.ot,M.t,E.Ps,T.g0,h.SJ,f.QW,g.Is,N.Cq,A.To,V.lN,K.c,m.u5,m.UX,b.ND,F.d,Kt,Xt.s]})}return a})()}}]);